# UX Guidelines: Руководство по пользовательскому интерфейсу

## Общие принципы

### 1. Простота и ясность

- **Принцип:** Интерфейс должен быть интуитивно понятным даже для пользователей без технического опыта
- **Правило:** Используйте простой язык, избегайте технического жаргона там, где это возможно
- **Пример:** "Найдено устройств: 5" вместо "Device count: 5"

### 2. Информативность

- **Принцип:** Пользователь должен понимать, что происходит в каждый момент времени
- **Правило:** Всегда показывайте прогресс длительных операций
- **Пример:** "Сканирование сети... 45% (112/256 устройств)"

### 3. Обратная связь

- **Принцип:** Каждое действие должно иметь видимый результат или обратную связь
- **Правило:** Успешные операции подтверждаются, ошибки объясняются
- **Пример:** "✓ Устройство 192.168.1.10 обнаружено" или "✗ Не удалось подключиться к 192.168.1.11:554"

---

## Тексты в консольном интерфейсе

### 1. Сообщения о статусе

#### Успешные операции:
```
✓ Устройство обнаружено: 192.168.1.10
✓ RTSP поток доступен: rtsp://192.168.1.10:554/stream1
✓ Результаты экспортированы в: results.json
```

#### Ошибки:
```
✗ Ошибка подключения к 192.168.1.11:554: Connection timeout
⚠ Устройство 192.168.1.12 требует аутентификации
⚠ FFmpeg не найден, используется базовый RTSP клиент
```

#### Информационные сообщения:
```
ℹ Сканирование сети 192.168.1.0/24...
ℹ Найдено устройств: 5
ℹ Проверка RTSP потоков...
```

### 2. Прогресс-индикаторы

#### Для сканирования сети:
```
Сканирование сети: [████████░░] 80% (204/256)
  Обработано устройств: 204
  Найдено камер: 5
  Ошибок: 2
```

#### Для проверки потоков:
```
Проверка RTSP потоков: [██████░░░░] 60% (3/5)
  ✓ rtsp://192.168.1.10:554/stream1
  ✓ rtsp://192.168.1.11:554/cam/realmonitor
  ⏳ rtsp://192.168.1.12:554/stream1 (проверка...)
```

### 3. Табличное представление

#### Список устройств:
```
┌──────────────┬──────────────┬──────────┬─────────────────────────────┐
│ IP Address   │ Manufacturer │ Model    │ Protocols                   │
├──────────────┼──────────────┼──────────┼─────────────────────────────┤
│ 192.168.1.10 │ Hikvision    │ DS-2CD2  │ RTSP, ONVIF, HTTP           │
│ 192.168.1.11 │ Dahua        │ IPC-HFW  │ RTSP, ONVIF                 │
│ 192.168.1.12 │ TP-Link      │ Tapo C200│ RTSP, HTTP, MJPEG           │
└──────────────┴──────────────┴──────────┴─────────────────────────────┘
```

#### Детальная информация об устройстве:
```
Устройство: 192.168.1.10
  Производитель: Hikvision
  Модель: DS-2CD2342WD-I
  MAC: 00:12:34:56:78:90
  Hostname: IPCAM-001
  
  Протоколы:
    ✓ RTSP (порт 554)
    ✓ ONVIF (порт 80)
    ✓ HTTP (порт 80)
  
  RTSP потоки:
    1. rtsp://192.168.1.10:554/Streaming/Channels/101
       Кодек: H.264
       Разрешение: 1920×1080
       FPS: 25
       Аудио: AAC, 2 канала
       Статус: ✓ Доступен
```

### 4. Сообщения об ошибках

#### Формат сообщений об ошибках:
```
[ERROR] Не удалось выполнить операцию: <описание>
  Причина: <детали>
  Действие: <что делать>
```

#### Примеры:
```
[ERROR] Не удалось подключиться к устройству 192.168.1.10
  Причина: Connection timeout (превышено время ожидания)
  Действие: Проверьте доступность устройства и настройки firewall

[ERROR] FFmpeg не найден в системе
  Причина: Команда 'ffprobe' не найдена в PATH
  Действие: Установите FFmpeg или укажите путь в конфигурации
```

---

## Дизайн вывода

### 1. Цветовая схема

#### Использование цветов (для терминалов с поддержкой ANSI):
- **Зеленый** — успешные операции, доступные устройства
- **Красный** — ошибки, недоступные устройства
- **Желтый** — предупреждения, устройства требующие внимания
- **Синий** — информационные сообщения
- **Серый** — второстепенная информация, отладочные сообщения

#### Примеры:
```bash
# Успех (зеленый)
echo -e "\033[32m✓ Устройство обнаружено\033[0m"

# Ошибка (красный)
echo -e "\033[31m✗ Ошибка подключения\033[0m"

# Предупреждение (желтый)
echo -e "\033[33m⚠ Требуется аутентификация\033[0m"

# Информация (синий)
echo -e "\033[34mℹ Сканирование сети...\033[0m"
```

### 2. Символы и иконки

#### Статусные символы:
- `✓` — успешно, доступно, готово
- `✗` — ошибка, недоступно, не удалось
- `⚠` — предупреждение, требует внимания
- `ℹ` — информация
- `⏳` — в процессе, ожидание
- `→` — переход, следующее действие
- `…` — продолжение, многоточие

### 3. Форматирование текста

#### Заголовки:
```
═══════════════════════════════════════════════════
  Local-video-server - Сканирование сети
═══════════════════════════════════════════════════
```

#### Разделители:
```
───────────────────────────────────────────────────
```

#### Важная информация (выделение):
```
>>> ВАЖНО: Обнаружено 10 новых устройств
```

---

## Командная строка (CLI)

### 1. Названия команд

#### Формат:
```
<команда> [подкоманда] [флаги] [аргументы]
```

#### Примеры:
```bash
# Основная команда
local-video-server scan

# С флагами
local-video-server scan --subnet 192.168.1.0/24 --check-rtsp

# С подкомандами (если будут)
local-video-server export json --output results.json
```

### 2. Описания команд и флагов

#### Формат help:
```
Использование:
  local-video-server scan [флаги]

Описание:
  Сканирует локальную сеть на наличие видеокамер и определяет
  поддерживаемые протоколы.

Флаги:
  --subnet string      Подсеть для сканирования (по умолчанию: auto)
                       Пример: 192.168.1.0/24
  --check-rtsp         Проверять RTSP потоки и получать параметры
  --export string      Формат экспорта: json, csv, xml, yaml
  --output string      Путь к файлу результатов
  --verbose            Детальный вывод (DEBUG уровень)
  --config string      Путь к конфигурационному файлу
  --help, -h           Показать эту справку
```

### 3. Сообщения валидации

#### Ошибки валидации аргументов:
```
[ERROR] Некорректный формат подсети: 192.168.1
  Ожидается формат: 192.168.1.0/24 или 192.168.1.0/255.255.255.0
  Используйте --help для получения справки
```

#### Предупреждения:
```
[WARN] Указанная подсеть очень большая (65536 адресов)
  Сканирование может занять продолжительное время
  Продолжить? (y/n): 
```

---

## Экспорт результатов

### 1. Сообщения об экспорте

#### Успешный экспорт:
```
✓ Результаты успешно экспортированы
  Файл: ./exports/scan_results_2024-01-15_14-30-25.json
  Устройств: 5
  Размер: 12.5 KB
```

#### Ошибка экспорта:
```
✗ Ошибка экспорта результатов
  Причина: Недостаточно места на диске
  Действие: Освободите место или укажите другую директорию
```

### 2. Формат имен файлов

#### Шаблон:
```
scan_results_YYYY-MM-DD_HH-MM-SS.{format}
```

#### Примеры:
```
scan_results_2024-01-15_14-30-25.json
scan_results_2024-01-15_14-30-25.csv
scan_results_2024-01-15_14-30-25.xml
```

---

## Интерактивные элементы

### 1. Подтверждения

#### Формат:
```
[WARN] Операция может занять продолжительное время
  Продолжить? (y/n): 
```

#### Обработка ответов:
- `y`, `Y`, `yes`, `Yes` — подтверждение
- `n`, `N`, `no`, `No` — отмена
- По умолчанию (Enter) — отмена для опасных операций

### 2. Прогресс-бары

#### Текстовый прогресс-бар:
```
Сканирование: [████████░░] 80%
```

#### С деталями:
```
Сканирование сети: [████████░░] 80% (204/256)
  ✓ Найдено камер: 5
  ⏳ Проверка RTSP: 3/5
  ✗ Ошибок: 2
```

---

## Локализация

### 1. Язык интерфейса

- **По умолчанию:** Русский
- **Альтернатива:** Английский (через флаг `--lang en` или переменную окружения `LANG=en`)

### 2. Форматы даты и времени

#### Русский формат:
```
15 января 2024, 14:30:25
```

#### Английский формат:
```
January 15, 2024, 14:30:25
```

### 3. Числовые форматы

#### Разделители:
- Русский: пробел для тысяч (1 234 567)
- Английский: запятая для тысяч (1,234,567)

---

## Доступность

### 1. Поддержка терминалов без цветов

- Если терминал не поддерживает цвета, используются только символы
- Цвета определяются автоматически через проверку `TERM` переменной

### 2. Читаемость

- Минимальная ширина вывода: 80 символов
- Максимальная ширина: 120 символов (для широких терминалов)
- Длинные строки переносятся с отступом

### 3. Структурированный вывод

- JSON вывод всегда доступен через флаг `--format json`
- Структурированный вывод удобен для парсинга другими инструментами

---

## Примеры полного вывода

### Пример 1: Успешное сканирование

```
═══════════════════════════════════════════════════
  Local-video-server - Сканирование сети
═══════════════════════════════════════════════════

ℹ Автоматическое определение подсети...
✓ Обнаружена подсеть: 192.168.1.0/24

ℹ Начало сканирования...
Сканирование сети: [████████████] 100% (256/256)

✓ Сканирование завершено
  Найдено устройств: 256
  Найдено камер: 5
  Ошибок: 0

ℹ Проверка RTSP потоков...
Проверка RTSP: [████████████] 100% (5/5)

═══════════════════════════════════════════════════
  Результаты сканирования
═══════════════════════════════════════════════════

Найдено камер: 5

┌──────────────┬──────────────┬──────────┬─────────────────────────────┐
│ IP Address   │ Manufacturer │ Model    │ Protocols                   │
├──────────────┼──────────────┼──────────┼─────────────────────────────┤
│ 192.168.1.10 │ Hikvision    │ DS-2CD2  │ RTSP, ONVIF, HTTP           │
│ 192.168.1.11 │ Dahua        │ IPC-HFW  │ RTSP, ONVIF                 │
│ 192.168.1.12 │ TP-Link      │ Tapo C200│ RTSP, HTTP, MJPEG           │
│ 192.168.1.13 │ Axis         │ P3245    │ RTSP, ONVIF, HTTP           │
│ 192.168.1.14 │ Ubiquiti     │ UVC-G3   │ RTSP, HTTP                  │
└──────────────┴──────────────┴──────────┴─────────────────────────────┘

✓ Результаты экспортированы: ./exports/scan_results_2024-01-15_14-30-25.json
```

### Пример 2: С ошибками

```
═══════════════════════════════════════════════════
  Local-video-server - Сканирование сети
═══════════════════════════════════════════════════

ℹ Сканирование подсети: 192.168.1.0/24
Сканирование сети: [████████████] 100% (256/256)

⚠ Сканирование завершено с предупреждениями
  Найдено устройств: 256
  Найдено камер: 3
  Ошибок: 2

⚠ Предупреждения:
  ✗ Не удалось подключиться к 192.168.1.15:554 (Connection timeout)
  ✗ Не удалось подключиться к 192.168.1.20:554 (Connection refused)

═══════════════════════════════════════════════════
  Результаты сканирования
═══════════════════════════════════════════════════

Найдено камер: 3

[Детальная информация о найденных камерах...]

✓ Результаты экспортированы: ./exports/scan_results_2024-01-15_14-30-25.json
```

---

## Рекомендации для разработчиков

### 1. Консистентность

- Используйте одинаковые символы и форматы во всем приложении
- Следуйте установленным паттернам для сообщений

### 2. Тестирование

- Тестируйте вывод на разных терминалах (Windows CMD, PowerShell, Linux терминалы)
- Проверяйте работу с цветами и без них
- Тестируйте на узких терминалах (80 символов)

### 3. Документация

- Все сообщения должны быть понятными без дополнительного контекста
- Используйте `--help` для подробных объяснений

### 4. Обратная связь

- Всегда предоставляйте обратную связь пользователю
- Показывайте прогресс для операций длительнее 1 секунды
- Объясняйте ошибки и предлагайте решения
